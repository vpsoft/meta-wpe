# Provides the WPE DIALServer plugin settings
WPE_DIALSERVER_NAME             ?= "MetroDIALServer"
WPE_DIALSERVER_AUTOSTART        ?= "true"

# Configure YouTube mode active/passive
WPE_DIALSERVER_YOUTUBE_MODE     ?= "passive" 
WPE_DIALSERVER_YOUTUBE_CALLSIGN ?= "${@bb.utils.contains('WPE_DIALSERVER_YOUTUBE_MODE', 'active', 'Cobalt', '', d)}"

# Configure Netflix mode active/passive
WPE_DIALSERVER_NETFLIX_MODE     ?= "passive"
WPE_DIALSERVER_NETFLIX_CALLSIGN ?= "${@bb.utils.contains('WPE_DIALSERVER_NETFLIX_MODE', 'active', 'Netflix', '', d)}"

WPE_DIALSERVER_YOUTUBE_EXTRAFLAGS = ' \
    -DPLUGIN_DIALSERVER_ENABLE_YOUTUBE=ON \
    -DPLUGIN_DIALSERVER_YOUTUBE_MODE=${WPE_DIALSERVER_YOUTUBE_MODE} \
    -DPLUGIN_DIALSERVER_YOUTUBE_CALLSIGN=${WPE_DIALSERVER_YOUTUBE_CALLSIGN} \
'

WPE_DIALSERVER_NETFLIX_EXTRAFLAGS = ' \
    -DPLUGIN_DIALSERVER_ENABLE_NETFLIX=ON \
    -DPLUGIN_DIALSERVER_NETFLIX_MODE=${WPE_DIALSERVER_NETFLIX_MODE} \
    -DPLUGIN_DIALSERVER_NETFLIX_CALLSIGN=${WPE_DIALSERVER_NETFLIX_CALLSIGN} \
'

WPE_DIALSERVER_EXTRAFLAGS = ' \
    -DPLUGIN_DIALSERVER_NAME=${WPE_DIALSERVER_NAME} \
    -DPLUGIN_DIALSERVER_AUTOSTART=${WPE_DIALSERVER_AUTOSTART} \
    ${@bb.utils.contains('PACKAGECONFIG', 'cobalt', '${WPE_DIALSERVER_YOUTUBE_EXTRAFLAGS}', '', d)} \
    ${@bb.utils.contains('PACKAGECONFIG', 'netflix', '${WPE_DIALSERVER_NETFLIX_EXTRAFLAGS}', '', d)} \
'

PACKAGECONFIG[dialserver] = " \
    -DPLUGIN_DIALSERVER=ON ${WPE_DIALSERVER_EXTRAFLAGS}, -DPLUGIN_DIALSERVER=OFF, \
"
